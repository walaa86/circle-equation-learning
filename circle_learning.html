<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ Ø±Ø­Ù„Ø© ØªØ¹Ù„Ù… Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© - Ù…ØºØ§Ù…Ø±Ø© Ù…Ù…ØªØ¹Ø©!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .progress-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .lesson-section {
            display: none;
            animation: fadeIn 0.5s;
        }

        .lesson-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .concept-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
            border: 3px solid #ff6b6b;
        }

        .concept-title {
            font-size: 2em;
            color: #c92a2a;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .visual-demo {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .circle-canvas {
            border: 2px solid #333;
            border-radius: 10px;
            margin: 20px auto;
            display: block;
            background: #f8f9fa;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .interactive-game {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border: 3px dashed #ff6b6b;
        }

        .puzzle-piece {
            display: inline-block;
            padding: 15px 25px;
            margin: 10px;
            background: white;
            border: 3px solid #4c6ef5;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .puzzle-piece:hover {
            transform: scale(1.1) rotate(2deg);
            background: #4c6ef5;
            color: white;
        }

        .puzzle-piece.correct {
            background: #51cf66;
            color: white;
            border-color: #2b8a3e;
        }

        .puzzle-piece.wrong {
            background: #ff6b6b;
            color: white;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .drop-zone {
            min-height: 100px;
            border: 3px dashed #4c6ef5;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            background: #f1f3f5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3em;
            color: #868e96;
        }

        .drop-zone.filled {
            background: #d0ebff;
            border-color: #1971c2;
        }

        .quiz-container {
            background: linear-gradient(135deg, #ffd3a5 0%, #fd6585 100%);
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
        }

        .quiz-question {
            font-size: 1.5em;
            color: #c92a2a;
            margin-bottom: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
        }

        .quiz-option {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
            font-size: 1.2em;
        }

        .quiz-option:hover {
            border-color: #4c6ef5;
            transform: translateX(-5px);
        }

        .quiz-option.selected {
            background: #4c6ef5;
            color: white;
        }

        .quiz-option.correct-answer {
            background: #51cf66;
            color: white;
            border-color: #2b8a3e;
        }

        .quiz-option.wrong-answer {
            background: #ff6b6b;
            color: white;
            border-color: #c92a2a;
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.3em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2em;
            text-align: center;
            display: none;
        }

        .feedback.success {
            background: #d3f9d8;
            color: #2b8a3e;
            border: 3px solid #51cf66;
            display: block;
        }

        .feedback.error {
            background: #ffe3e3;
            color: #c92a2a;
            border: 3px solid #ff6b6b;
            display: block;
        }

        .lego-builder {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 20px 0;
        }

        .lego-block {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            font-size: 1.1em;
        }

        .lego-block:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .memory-card {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 10px;
            cursor: pointer;
            font-size: 2em;
            color: white;
            transition: all 0.3s;
            position: relative;
        }

        .memory-card.flipped {
            background: white;
            border: 3px solid #4c6ef5;
        }

        .memory-card.matched {
            background: #51cf66;
            cursor: default;
        }

        .stars {
            font-size: 3em;
            text-align: center;
            margin: 20px 0;
        }

        .hint-box {
            background: #fff3bf;
            border: 3px solid #ffd43b;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-size: 1.1em;
        }

        .example-box {
            background: #e7f5ff;
            border: 3px solid #339af0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .formula-box {
            background: #f8f0fc;
            border: 3px solid #9775fa;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            font-size: 1.5em;
            text-align: center;
            font-weight: bold;
        }

        .celebration {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 1000;
            animation: popIn 0.5s;
        }

        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .celebration.show {
            display: block;
        }

        .emoji-rain {
            font-size: 3em;
            animation: fall 2s linear infinite;
        }

        @keyframes fall {
            to { transform: translateY(100vh); }
        }

        .score-board {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }

        .score-number {
            font-size: 3em;
            color: #4c6ef5;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .concept-title {
                font-size: 1.5em;
            }
            
            .btn {
                padding: 12px 25px;
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø³Ø­Ø±ÙŠØ©</h1>
            <p style="font-size: 1.3em;">ØªØ¹Ù„Ù… Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ØªØ¹Ø©! ğŸš€</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar">0%</div>
        </div>

        <div class="score-board">
            <div>ğŸ† Ù†Ù‚Ø§Ø·Ùƒ</div>
            <div class="score-number" id="totalScore">0</div>
        </div>

        <!-- Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©ØŸ -->
        <div class="lesson-section active" id="section1">
            <div class="concept-card">
                <div class="concept-title">
                    ğŸ¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©!
                </div>
                
                <div class="visual-demo">
                    <h3 style="color: #4c6ef5; margin-bottom: 20px;">Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© ØªØªØ­Ø±Ùƒ! ğŸ‘€</h3>
                    <canvas id="canvas1" class="circle-canvas" width="400" height="400"></canvas>
                    <p style="font-size: 1.3em; margin-top: 20px; color: #495057;">
                        Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ù‡ÙŠ Ø´ÙƒÙ„ Ø¬Ù…ÙŠÙ„! ÙƒÙ„ Ù†Ù‚Ø·Ø© Ø¹Ù„ÙŠÙ‡Ø§ Ø¨Ø¹ÙŠØ¯Ø© Ù†ÙØ³ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¹Ù† Ø§Ù„Ù…Ø±ÙƒØ²! 
                    </p>
                </div>

                <div class="hint-box">
                    ğŸ’¡ <strong>ÙÙƒØ±Ø© Ø¨Ø³ÙŠØ·Ø©:</strong> ØªØ®ÙŠÙ„ Ø£Ù†Ùƒ ØªÙ…Ø³Ùƒ Ø®ÙŠØ· ÙˆØªÙ„ÙÙ‡ Ø­ÙˆÙ„ Ù…Ø³Ù…Ø§Ø±... Ø§Ù„Ø®ÙŠØ· ÙŠØ±Ø³Ù… Ø¯Ø§Ø¦Ø±Ø©! Ø·ÙˆÙ„ Ø§Ù„Ø®ÙŠØ· Ù‡Ùˆ Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø±!
                </div>

                <div class="interactive-game">
                    <h3 style="margin-bottom: 20px;">ğŸ® Ù„Ø¹Ø¨Ø©: Ø§Ø®ØªØ± Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©!</h3>
                    <p style="font-size: 1.2em; margin-bottom: 20px;">Ø§Ø³Ø­Ø¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„ØµØ­ÙŠØ­Ø©!</p>
                    
                    <div style="margin: 30px 0;">
                        <div class="puzzle-piece draggable" draggable="true" data-answer="center">Ø§Ù„Ù…Ø±ÙƒØ² ğŸ“</div>
                        <div class="puzzle-piece draggable" draggable="true" data-answer="radius">Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± ğŸ“</div>
                        <div class="puzzle-piece draggable" draggable="true" data-answer="point">Ù†Ù‚Ø·Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© ğŸ”´</div>
                        <div class="puzzle-piece draggable" draggable="true" data-answer="wrong">Ù…Ø±Ø¨Ø¹ âŒ</div>
                    </div>

                    <div class="drop-zone" data-zone="center">
                        <span>ğŸ¯ Ø¶Ø¹ Ù‡Ù†Ø§ Ø§Ø³Ù… Ø§Ù„ÙˆØ³Ø·</span>
                    </div>
                    <div class="drop-zone" data-zone="radius">
                        <span>ğŸ“ Ø¶Ø¹ Ù‡Ù†Ø§ Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ù…Ø±ÙƒØ² Ù„Ù„Ø­Ø§ÙØ©</span>
                    </div>
                    <div class="drop-zone" data-zone="point">
                        <span>ğŸ”´ Ø¶Ø¹ Ù‡Ù†Ø§ Ø§Ø³Ù… Ø£ÙŠ Ù…ÙƒØ§Ù† Ø¹Ù„Ù‰ Ø­Ø§ÙØ© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©</span>
                    </div>
                </div>

                <div class="feedback" id="feedback1"></div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="checkSection1()">âœ… ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
                <button class="btn btn-success" id="next1" onclick="goToSection(2)" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â¬…ï¸</button>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± ÙˆØ§Ù„Ù…Ø±ÙƒØ² -->
        <div class="lesson-section" id="section2">
            <div class="concept-card">
                <div class="concept-title">
                    ğŸ“ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± ÙˆØ§Ù„Ù…Ø±ÙƒØ²
                </div>

                <div class="visual-demo">
                    <h3 style="color: #4c6ef5; margin-bottom: 20px;">Ø§Ø±Ø³Ù… Ø¯Ø§Ø¦Ø±ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©! ğŸ¨</h3>
                    <canvas id="canvas2" class="circle-canvas" width="400" height="400"></canvas>
                    <div style="margin: 20px 0;">
                        <label style="font-size: 1.2em; margin: 10px;">Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø±: </label>
                        <input type="range" id="radiusSlider" min="20" max="150" value="50" style="width: 200px;">
                        <span id="radiusValue" style="font-size: 1.5em; color: #4c6ef5; margin-right: 10px;">50</span>
                    </div>
                </div>

                <div class="example-box">
                    <h3 style="color: #339af0;">ğŸ“ Ù…Ø«Ø§Ù„:</h3>
                    <p style="font-size: 1.2em; line-height: 1.8;">
                        Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø±ÙƒØ² Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© (3, 4) ÙˆÙ†ØµÙ Ø§Ù„Ù‚Ø·Ø± = 5<br>
                        Ù…Ø¹Ù†Ù‰ Ø°Ù„Ùƒ: Ø£ÙŠ Ù†Ù‚Ø·Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø¨Ø¹Ø¯Ù‡Ø§ Ø¹Ù† (3, 4) ÙŠØ³Ø§ÙˆÙŠ 5 ÙˆØ­Ø¯Ø§Øª Ø¨Ø§Ù„Ø¶Ø¨Ø·! âœ¨
                    </p>
                </div>

                <div class="interactive-game">
                    <h3 style="margin-bottom: 20px;">ğŸ§© Ø¨Ø§Ø²Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…!</h3>
                    <p style="font-size: 1.2em;">Ø§Ø®ØªØ± Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± Ø§Ù„ØµØ­ÙŠØ­ Ù„ÙƒÙ„ Ù…Ø³Ø£Ù„Ø©:</p>
                    
                    <div id="puzzle2" style="margin: 20px 0;"></div>
                </div>

                <div class="quiz-container">
                    <div class="quiz-question">
                        â“ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ù…Ø±ÙƒØ² Ø¥Ù„Ù‰ Ø£ÙŠ Ù†Ù‚Ø·Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© = 7ØŒ Ù…Ø§ Ù‡Ùˆ Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø±ØŸ
                    </div>
                    <div class="quiz-option" onclick="selectQuiz2(this, false)">5</div>
                    <div class="quiz-option" onclick="selectQuiz2(this, true)">7</div>
                    <div class="quiz-option" onclick="selectQuiz2(this, false)">14</div>
                    <div class="quiz-option" onclick="selectQuiz2(this, false)">10</div>
                </div>

                <div class="feedback" id="feedback2"></div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="goToSection(1)">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <button class="btn btn-success" id="next2" onclick="goToSection(3)" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â¬…ï¸</button>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø© -->
        <div class="lesson-section" id="section3">
            <div class="concept-card">
                <div class="concept-title">
                    ğŸ¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø³Ø­Ø±ÙŠØ©!
                </div>

                <div class="formula-box">
                    xÂ² + yÂ² = rÂ²
                </div>

                <div class="hint-box">
                    ğŸ’¡ <strong>Ø§Ù„Ø³Ø±:</strong> Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© ÙÙ‚Ø· Ù„Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØªÙŠ Ù…Ø±ÙƒØ²Ù‡Ø§ Ø¹Ù†Ø¯ (0, 0) ÙŠØ¹Ù†ÙŠ ÙÙŠ Ø§Ù„ÙˆØ³Ø· ØªÙ…Ø§Ù…Ø§Ù‹!
                </div>

                <div class="visual-demo">
                    <h3 style="color: #4c6ef5; margin-bottom: 20px;">Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© ØªØ¹Ù…Ù„! âœ¨</h3>
                    <canvas id="canvas3" class="circle-canvas" width="400" height="400"></canvas>
                    <p style="font-size: 1.3em; margin: 20px; color: #495057;">
                        Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: xÂ² + yÂ² = <span id="rSquared" style="color: #4c6ef5; font-weight: bold;">2500</span>
                    </p>
                </div>

                <div class="example-box">
                    <h3 style="color: #339af0;">ğŸ“ Ø£Ù…Ø«Ù„Ø© Ø³Ù‡Ù„Ø©:</h3>
                    <div style="font-size: 1.2em; line-height: 2;">
                        ğŸ”¹ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± = 5 â†’ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: xÂ² + yÂ² = 25<br>
                        ğŸ”¹ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± = 10 â†’ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: xÂ² + yÂ² = 100<br>
                        ğŸ”¹ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± = 3 â†’ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: xÂ² + yÂ² = 9
                    </div>
                </div>

                <div class="interactive-game">
                    <h3 style="margin-bottom: 20px;">ğŸ® Ù„Ø¹Ø¨Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø¨Ø§Ù„Ù„ÙŠØºÙˆ!</h3>
                    <p style="font-size: 1.2em;">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©!</p>
                    
                    <div class="lego-builder" id="legoBuilder">
                        <div class="lego-block" style="background: #ff6b6b;" onclick="selectLego(this, 'xÂ²')">xÂ²</div>
                        <div class="lego-block" style="background: #51cf66;" onclick="selectLego(this, '+')">+</div>
                        <div class="lego-block" style="background: #4c6ef5;" onclick="selectLego(this, 'yÂ²')">yÂ²</div>
                        <div class="lego-block" style="background: #ffd43b;" onclick="selectLego(this, '=')"> = </div>
                        <div class="lego-block" style="background: #9775fa;" onclick="selectLego(this, '25')">25</div>
                    </div>

                    <div class="drop-zone" id="legoEquation" style="min-height: 80px; font-size: 1.5em;">
                        Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø·Ø¹ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨!
                    </div>
                </div>

                <div class="quiz-container">
                    <div class="quiz-question">
                        â“ Ù…Ø§ Ù‡ÙŠ Ù…Ø¹Ø§Ø¯Ù„Ø© Ø¯Ø§Ø¦Ø±Ø© Ù…Ø±ÙƒØ²Ù‡Ø§ (0,0) ÙˆÙ†ØµÙ Ù‚Ø·Ø±Ù‡Ø§ 8?
                    </div>
                    <div class="quiz-option" onclick="selectQuiz3(this, false)">xÂ² + yÂ² = 8</div>
                    <div class="quiz-option" onclick="selectQuiz3(this, true)">xÂ² + yÂ² = 64</div>
                    <div class="quiz-option" onclick="selectQuiz3(this, false)">x + y = 64</div>
                    <div class="quiz-option" onclick="selectQuiz3(this, false)">xÂ² + yÂ² = 16</div>
                </div>

                <div class="feedback" id="feedback3"></div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="goToSection(2)">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <button class="btn btn-success" id="next3" onclick="goToSection(4)" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â¬…ï¸</button>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ© -->
        <div class="lesson-section" id="section4">
            <div class="concept-card">
                <div class="concept-title">
                    ğŸŒŸ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ© (Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©!)
                </div>

                <div class="formula-box" style="background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);">
                    (x - a)Â² + (y - b)Â² = rÂ²
                </div>

                <div class="hint-box">
                    ğŸ’¡ <strong>Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø±Ù…ÙˆØ²:</strong><br>
                    â€¢ (a, b) = Ù…Ø±ÙƒØ² Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© ğŸ“<br>
                    â€¢ r = Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± ğŸ“<br>
                    â€¢ x Ùˆ y = Ø£ÙŠ Ù†Ù‚Ø·Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© ğŸ”´
                </div>

                <div class="visual-demo">
                    <h3 style="color: #4c6ef5; margin-bottom: 20px;">Ø­Ø±Ùƒ Ø§Ù„Ù…Ø±ÙƒØ² ÙˆØ´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© ØªØªØºÙŠØ±! ğŸ¨</h3>
                    <canvas id="canvas4" class="circle-canvas" width="400" height="400"></canvas>
                    <div style="margin: 20px;">
                        <p style="font-size: 1.2em;">Ø§Ù„Ù…Ø±ÙƒØ²:</p>
                        <label>a = </label>
                        <input type="range" id="aSlider" min="-5" max="5" value="2" style="width: 150px;">
                        <span id="aValue" style="font-weight: bold; color: #4c6ef5;">2</span>
                        <br><br>
                        <label>b = </label>
                        <input type="range" id="bSlider" min="-5" max="5" value="3" style="width: 150px;">
                        <span id="bValue" style="font-weight: bold; color: #4c6ef5;">3</span>
                    </div>
                    <div class="formula-box" id="formula4" style="font-size: 1.3em;">
                        (x - 2)Â² + (y - 3)Â² = 25
                    </div>
                </div>

                <div class="example-box">
                    <h3 style="color: #339af0;">ğŸ“ Ø£Ù…Ø«Ù„Ø© ÙˆØ§Ø¶Ø­Ø©:</h3>
                    <div style="font-size: 1.2em; line-height: 2;">
                        ğŸ”¹ Ø§Ù„Ù…Ø±ÙƒØ² (3, 4) ÙˆÙ†ØµÙ Ø§Ù„Ù‚Ø·Ø± 5<br>
                        â†’ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: (x - 3)Â² + (y - 4)Â² = 25<br><br>
                        ğŸ”¹ Ø§Ù„Ù…Ø±ÙƒØ² (1, 2) ÙˆÙ†ØµÙ Ø§Ù„Ù‚Ø·Ø± 6<br>
                        â†’ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: (x - 1)Â² + (y - 2)Â² = 36<br><br>
                        ğŸ”¹ Ø§Ù„Ù…Ø±ÙƒØ² (-2, 5) ÙˆÙ†ØµÙ Ø§Ù„Ù‚Ø·Ø± 4<br>
                        â†’ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: (x + 2)Â² + (y - 5)Â² = 16
                    </div>
                </div>

                <div class="interactive-game">
                    <h3 style="margin-bottom: 20px;">ğŸ¯ Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©!</h3>
                    <p style="font-size: 1.2em;">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªØ·Ø§Ø¨Ù‚Ø©!</p>
                    <div id="memoryGame" style="text-align: center;"></div>
                </div>

                <div class="quiz-container">
                    <div class="quiz-question">
                        â“ Ù…Ø§ Ù‡ÙŠ Ù…Ø¹Ø§Ø¯Ù„Ø© Ø¯Ø§Ø¦Ø±Ø© Ù…Ø±ÙƒØ²Ù‡Ø§ (5, 7) ÙˆÙ†ØµÙ Ù‚Ø·Ø±Ù‡Ø§ 3?
                    </div>
                    <div class="quiz-option" onclick="selectQuiz4(this, false)">(x - 5)Â² + (y - 7)Â² = 3</div>
                    <div class="quiz-option" onclick="selectQuiz4(this, true)">(x - 5)Â² + (y - 7)Â² = 9</div>
                    <div class="quiz-option" onclick="selectQuiz4(this, false)">(x + 5)Â² + (y + 7)Â² = 9</div>
                    <div class="quiz-option" onclick="selectQuiz4(this, false)">(x - 5)Â² + (y - 7)Â² = 6</div>
                </div>

                <div class="feedback" id="feedback4"></div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="goToSection(3)">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <button class="btn btn-success" id="next4" onclick="goToSection(5)" disabled>Ø§Ù„ØªØ§Ù„ÙŠ â¬…ï¸</button>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ -->
        <div class="lesson-section" id="section5">
            <div class="concept-card">
                <div class="concept-title">
                    ğŸ† Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø·Ù„!
                </div>

                <div style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 30px; border-radius: 15px; margin: 20px 0;">
                    <h3 style="text-align: center; color: #4c6ef5; font-size: 1.8em;">ğŸ¯ Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„</h3>
                    
                    <div class="quiz-container" style="margin: 30px 0;">
                        <div class="quiz-question">
                            Ø§Ù„Ø³Ø¤Ø§Ù„ 1ï¸âƒ£: Ù…Ø§ Ù‡Ùˆ Ù†ØµÙ Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©: xÂ² + yÂ² = 49 ØŸ
                        </div>
                        <div class="quiz-option" onclick="selectFinal(1, this, true)">7</div>
                        <div class="quiz-option" onclick="selectFinal(1, this, false)">49</div>
                        <div class="quiz-option" onclick="selectFinal(1, this, false)">14</div>
                        <div class="quiz-option" onclick="selectFinal(1, this, false)">3.5</div>
                    </div>

                    <div class="quiz-container">
                        <div class="quiz-question">
                            Ø§Ù„Ø³Ø¤Ø§Ù„ 2ï¸âƒ£: Ù…Ø§ Ù‡Ùˆ Ù…Ø±ÙƒØ² Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©: (x - 4)Â² + (y + 3)Â² = 16 ØŸ
                        </div>
                        <div class="quiz-option" onclick="selectFinal(2, this, false)">(-4, 3)</div>
                        <div class="quiz-option" onclick="selectFinal(2, this, true)">(4, -3)</div>
                        <div class="quiz-option" onclick="selectFinal(2, this, false)">(4, 3)</div>
                        <div class="quiz-option" onclick="selectFinal(2, this, false)">(-4, -3)</div>
                    </div>

                    <div class="quiz-container">
                        <div class="quiz-question">
                            Ø§Ù„Ø³Ø¤Ø§Ù„ 3ï¸âƒ£: Ø§ÙƒØªØ¨ Ù…Ø¹Ø§Ø¯Ù„Ø© Ø¯Ø§Ø¦Ø±Ø© Ù…Ø±ÙƒØ²Ù‡Ø§ (2, 5) ÙˆÙ†ØµÙ Ù‚Ø·Ø±Ù‡Ø§ 6
                        </div>
                        <div class="quiz-option" onclick="selectFinal(3, this, false)">(x + 2)Â² + (y + 5)Â² = 6</div>
                        <div class="quiz-option" onclick="selectFinal(3, this, false)">(x - 2)Â² + (y - 5)Â² = 6</div>
                        <div class="quiz-option" onclick="selectFinal(3, this, true)">(x - 2)Â² + (y - 5)Â² = 36</div>
                        <div class="quiz-option" onclick="selectFinal(3, this, false)">(x + 2)Â² + (y + 5)Â² = 36</div>
                    </div>

                    <div class="quiz-container">
                        <div class="quiz-question">
                            Ø§Ù„Ø³Ø¤Ø§Ù„ 4ï¸âƒ£: Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© (x - 1)Â² + (y + 4)Â² = 100ØŒ Ù…Ø§ Ù‡Ùˆ Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø±ØŸ
                        </div>
                        <div class="quiz-option" onclick="selectFinal(4, this, false)">100</div>
                        <div class="quiz-option" onclick="selectFinal(4, this, true)">10</div>
                        <div class="quiz-option" onclick="selectFinal(4, this, false)">50</div>
                        <div class="quiz-option" onclick="selectFinal(4, this, false)">20</div>
                    </div>

                    <div class="quiz-container">
                        <div class="quiz-question">
                            Ø§Ù„Ø³Ø¤Ø§Ù„ 5ï¸âƒ£: Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù†Ù‚Ø·Ø© (3, 4) ØªÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¯Ø§Ø¦Ø±Ø© Ù…Ø±ÙƒØ²Ù‡Ø§ Ø§Ù„Ø£ØµÙ„ØŒ Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©ØŸ
                        </div>
                        <div class="quiz-option" onclick="selectFinal(5, this, false)">xÂ² + yÂ² = 7</div>
                        <div class="quiz-option" onclick="selectFinal(5, this, true)">xÂ² + yÂ² = 25</div>
                        <div class="quiz-option" onclick="selectFinal(5, this, false)">xÂ² + yÂ² = 12</div>
                        <div class="quiz-option" onclick="selectFinal(5, this, false)">xÂ² + yÂ² = 5</div>
                    </div>
                </div>

                <div class="feedback" id="feedbackFinal"></div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="goToSection(4)">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <button class="btn btn-success" onclick="checkFinalTest()">âœ… ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
                <button class="btn btn-success" id="finishBtn" onclick="finishCourse()" disabled style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">ğŸ‰ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯Ø±Ø³</button>
            </div>
        </div>
    </div>

    <div class="celebration" id="celebration">
        <div class="stars">â­â­â­â­â­</div>
        <h2 style="font-size: 3em; color: #4c6ef5; margin: 20px 0;">Ø£Ø­Ø³Ù†Øª! ğŸ‰</h2>
        <p style="font-size: 1.5em; color: #495057;">Ø£Ù†Øª Ø¨Ø·Ù„ Ø­Ù‚ÙŠÙ‚ÙŠ!</p>
        <div style="font-size: 5em; margin: 20px 0;">ğŸ†</div>
        <button class="btn btn-primary" onclick="closeCelebration()">Ù…ØªØ§Ø¨Ø¹Ø© ğŸš€</button>
    </div>

    <script>
        let score = 0;
        let currentSection = 1;
        let finalAnswers = [false, false, false, false, false];
        let legoSequence = [];
        const correctLegoSequence = ['xÂ²', '+', 'yÂ²', '=', '25'];

        // Canvas 1 Animation
        function animateCircle1() {
            const canvas = document.getElementById('canvas1');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let angle = 0;

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Grid
                ctx.strokeStyle = '#e9ecef';
                ctx.lineWidth = 1;
                for (let i = 0; i < canvas.width; i += 40) {
                    ctx.beginPath();
                    ctx.moveTo(i, 0);
                    ctx.lineTo(i, canvas.height);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(0, i);
                    ctx.lineTo(canvas.width, i);
                    ctx.stroke();
                }

                // Circle
                ctx.beginPath();
                ctx.arc(200, 200, 100, 0, Math.PI * 2);
                ctx.strokeStyle = '#4c6ef5';
                ctx.lineWidth = 3;
                ctx.stroke();

                // Center
                ctx.fillStyle = '#ff6b6b';
                ctx.beginPath();
                ctx.arc(200, 200, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillText('Ø§Ù„Ù…Ø±ÙƒØ²', 210, 200);

                // Radius
                const x = 200 + 100 * Math.cos(angle);
                const y = 200 + 100 * Math.sin(angle);
                ctx.beginPath();
                ctx.moveTo(200, 200);
                ctx.lineTo(x, y);
                ctx.strokeStyle = '#51cf66';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Point
                ctx.fillStyle = '#ffd43b';
                ctx.beginPath();
                ctx.arc(x, y, 6, 0, Math.PI * 2);
                ctx.fill();

                angle += 0.02;
                requestAnimationFrame(draw);
            }
            draw();
        }

        // Canvas 2 Interactive
        function setupCanvas2() {
            const canvas = document.getElementById('canvas2');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const slider = document.getElementById('radiusSlider');
            const valueDisplay = document.getElementById('radiusValue');

            function draw() {
                const radius = parseInt(slider.value);
                valueDisplay.textContent = radius;

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Grid
                ctx.strokeStyle = '#e9ecef';
                ctx.lineWidth = 1;
                for (let i = 0; i < canvas.width; i += 40) {
                    ctx.beginPath();
                    ctx.moveTo(i, 0);
                    ctx.lineTo(i, canvas.height);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(0, i);
                    ctx.lineTo(canvas.width, i);
                    ctx.stroke();
                }

                // Circle
                ctx.beginPath();
                ctx.arc(200, 200, radius, 0, Math.PI * 2);
                ctx.strokeStyle = '#4c6ef5';
                ctx.lineWidth = 3;
                ctx.stroke();
                ctx.fillStyle = 'rgba(76, 110, 245, 0.1)';
                ctx.fill();

                // Center
                ctx.fillStyle = '#ff6b6b';
                ctx.beginPath();
                ctx.arc(200, 200, 5, 0, Math.PI * 2);
                ctx.fill();

                // Radius line
                ctx.beginPath();
                ctx.moveTo(200, 200);
                ctx.lineTo(200 + radius, 200);
                ctx.strokeStyle = '#51cf66';
                ctx.lineWidth = 2;
                ctx.stroke();

                ctx.fillStyle = '#000';
                ctx.font = 'bold 16px Arial';
                ctx.fillText('r = ' + radius, 200 + radius/2 - 20, 190);
            }

            slider.addEventListener('input', draw);
            draw();
        }

        // Canvas 3
        function setupCanvas3() {
            const canvas = document.getElementById('canvas3');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const r = 50;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Axes
            ctx.strokeStyle = '#adb5bd';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, 200);
            ctx.lineTo(400, 200);
            ctx.moveTo(200, 0);
            ctx.lineTo(200, 400);
            ctx.stroke();

            // Circle
            ctx.beginPath();
            ctx.arc(200, 200, r, 0, Math.PI * 2);
            ctx.strokeStyle = '#4c6ef5';
            ctx.lineWidth = 3;
            ctx.stroke();
            ctx.fillStyle = 'rgba(76, 110, 245, 0.1)';
            ctx.fill();

            // Center
            ctx.fillStyle = '#ff6b6b';
            ctx.beginPath();
            ctx.arc(200, 200, 6, 0, Math.PI * 2);
            ctx.fill();

            document.getElementById('rSquared').textContent = r * r;
        }

        // Canvas 4
        function setupCanvas4() {
            const canvas = document.getElementById('canvas4');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const aSlider = document.getElementById('aSlider');
            const bSlider = document.getElementById('bSlider');
            const aValue = document.getElementById('aValue');
            const bValue = document.getElementById('bValue');
            const formula = document.getElementById('formula4');

            function draw() {
                const a = parseInt(aSlider.value);
                const b = parseInt(bSlider.value);
                aValue.textContent = a;
                bValue.textContent = b;

                const centerX = 200 + a * 20;
                const centerY = 200 - b * 20;
                const r = 50;

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Grid
                ctx.strokeStyle = '#e9ecef';
                ctx.lineWidth = 1;
                for (let i = 0; i < canvas.width; i += 40) {
                    ctx.beginPath();
                    ctx.moveTo(i, 0);
                    ctx.lineTo(i, canvas.height);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(0, i);
                    ctx.lineTo(canvas.width, i);
                    ctx.stroke();
                }

                // Axes
                ctx.strokeStyle = '#adb5bd';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, 200);
                ctx.lineTo(400, 200);
                ctx.moveTo(200, 0);
                ctx.lineTo(200, 400);
                ctx.stroke();

                // Circle
                ctx.beginPath();
                ctx.arc(centerX, centerY, r, 0, Math.PI * 2);
                ctx.strokeStyle = '#4c6ef5';
                ctx.lineWidth = 3;
                ctx.stroke();
                ctx.fillStyle = 'rgba(76, 110, 245, 0.1)';
                ctx.fill();

                // Center
                ctx.fillStyle = '#ff6b6b';
                ctx.beginPath();
                ctx.arc(centerX, centerY, 6, 0, Math.PI * 2);
                ctx.fill();

                ctx.fillStyle = '#000';
                ctx.font = 'bold 14px Arial';
                ctx.fillText(`(${a}, ${b})`, centerX + 10, centerY - 10);

                // Update formula
                const xPart = a >= 0 ? `(x - ${a})` : `(x + ${-a})`;
                const yPart = b >= 0 ? `(y - ${b})` : `(y + ${-b})`;
                formula.textContent = `${xPart}Â² + ${yPart}Â² = 25`;
            }

            aSlider.addEventListener('input', draw);
            bSlider.addEventListener('input', draw);
            draw();
        }

        // Drag and Drop
        document.addEventListener('DOMContentLoaded', function() {
            animateCircle1();
            setupCanvas2();

            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.dataset.answer);
                    this.style.opacity = '0.5';
                });

                draggable.addEventListener('dragend', function() {
                    this.style.opacity = '1';
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.background = '#d0ebff';
                });

                zone.addEventListener('dragleave', function() {
                    this.style.background = '';
                });

                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    const data = e.dataTransfer.getData('text/plain');
                    if (data === this.dataset.zone) {
                        this.classList.add('filled');
                        this.innerHTML = '<span style="color: #1971c2; font-weight: bold;">âœ“ ØµØ­ÙŠØ­!</span>';
                    } else {
                        this.innerHTML = '<span style="color: #c92a2a; font-weight: bold;">âœ— Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</span>';
                        setTimeout(() => {
                            this.innerHTML = this.querySelector('span').textContent;
                        }, 1000);
                    }
                    this.style.background = '';
                });
            });

            // Setup puzzle 2
            const puzzle2 = document.getElementById('puzzle2');
            if (puzzle2) {
                puzzle2.innerHTML = `
                    <div style="background: white; padding: 20px; border-radius: 10px; margin: 10px 0;">
                        <p style="font-size: 1.2em; margin-bottom: 15px;">Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ù…Ø±ÙƒØ² Ù„Ù„Ø­Ø§ÙØ© = 12</p>
                        <div>
                            <span class="puzzle-piece" onclick="checkPuzzle2(this, true)">12</span>
                            <span class="puzzle-piece" onclick="checkPuzzle2(this, false)">24</span>
                            <span class="puzzle-piece" onclick="checkPuzzle2(this, false)">6</span>
                        </div>
                    </div>
                `;
            }

            // Setup memory game
            setupMemoryGame();
        });

        function checkPuzzle2(element, correct) {
            if (correct) {
                element.classList.add('correct');
                addScore(10);
                setTimeout(() => {
                    element.classList.remove('correct');
                }, 1000);
            } else {
                element.classList.add('wrong');
                setTimeout(() => {
                    element.classList.remove('wrong');
                }, 500);
            }
        }

        function selectLego(element, value) {
            legoSequence.push(value);
            const display = document.getElementById('legoEquation');
            display.textContent = legoSequence.join(' ');
            
            if (legoSequence.length === 5) {
                if (JSON.stringify(legoSequence) === JSON.stringify(correctLegoSequence)) {
                    display.style.color = '#51cf66';
                    display.style.borderColor = '#51cf66';
                    addScore(20);
                    setTimeout(() => {
                        showFeedback('feedback3', 'success', 'ğŸ‰ Ø±Ø§Ø¦Ø¹! Ø¨Ù†ÙŠØª Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!');
                    }, 500);
                } else {
                    display.style.color = '#ff6b6b';
                    display.style.borderColor = '#ff6b6b';
                    setTimeout(() => {
                        legoSequence = [];
                        display.textContent = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!';
                        display.style.color = '';
                        display.style.borderColor = '';
                    }, 1000);
                }
            }
        }

        function setupMemoryGame() {
            const memoryGame = document.getElementById('memoryGame');
            if (!memoryGame) return;

            const cards = [
                { text: 'Ø§Ù„Ù…Ø±ÙƒØ² (2,3)', pair: 'a=2, b=3' },
                { text: 'a=2, b=3', pair: 'Ø§Ù„Ù…Ø±ÙƒØ² (2,3)' },
                { text: 'Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± 5', pair: 'rÂ²=25' },
                { text: 'rÂ²=25', pair: 'Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± 5' },
                { text: '(x-1)Â²', pair: 'Ø§Ù„Ù…Ø±ÙƒØ² x=1' },
                { text: 'Ø§Ù„Ù…Ø±ÙƒØ² x=1', pair: '(x-1)Â²' }
            ];

            cards.sort(() => Math.random() - 0.5);

            let flipped = [];
            let matched = 0;

            cards.forEach((card, index) => {
                const div = document.createElement('div');
                div.className = 'memory-card';
                div.dataset.pair = card.pair;
                div.innerHTML = 'â“';
                div.onclick = function() {
                    if (this.classList.contains('flipped') || this.classList.contains('matched')) return;
                    
                    this.classList.add('flipped');
                    this.innerHTML = card.text;
                    flipped.push(this);

                    if (flipped.length === 2) {
                        if (flipped[0].dataset.pair === flipped[1].innerHTML) {
                            flipped[0].classList.add('matched');
                            flipped[1].classList.add('matched');
                            matched += 2;
                            addScore(15);
                            if (matched === cards.length) {
                                setTimeout(() => {
                                    showCelebration();
                                }, 500);
                            }
                            flipped = [];
                        } else {
                            setTimeout(() => {
                                flipped.forEach(card => {
                                    card.classList.remove('flipped');
                                    card.innerHTML = 'â“';
                                });
                                flipped = [];
                            }, 1000);
                        }
                    }
                };
                memoryGame.appendChild(div);
            });
        }

        function checkSection1() {
            const filled = document.querySelectorAll('.drop-zone.filled').length;
            if (filled === 3) {
                showFeedback('feedback1', 'success', 'ğŸ‰ Ù…Ù…ØªØ§Ø²! ÙÙ‡Ù…Øª Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©! +30 Ù†Ù‚Ø·Ø©');
                addScore(30);
                document.getElementById('next1').disabled = false;
                showCelebration();
            } else {
                showFeedback('feedback1', 'error', 'âŒ ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!');
            }
        }

        function selectQuiz2(element, correct) {
            document.querySelectorAll('#section2 .quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });

            if (correct) {
                element.classList.add('correct-answer');
                showFeedback('feedback2', 'success', 'ğŸ‰ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! +25 Ù†Ù‚Ø·Ø©');
                addScore(25);
                document.getElementById('next2').disabled = false;
                showCelebration();
            } else {
                element.classList.add('wrong-answer');
                showFeedback('feedback2', 'error', 'âŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰! Ø§Ù„Ø¬ÙˆØ§Ø¨ Ù‡Ùˆ 7 Ù„Ø£Ù† Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± = Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ù…Ø±ÙƒØ² Ù„Ø£ÙŠ Ù†Ù‚Ø·Ø©');
            }
        }

        function selectQuiz3(element, correct) {
            document.querySelectorAll('#section3 .quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });

            if (correct) {
                element.classList.add('correct-answer');
                showFeedback('feedback3', 'success', 'ğŸ‰ Ø±Ø§Ø¦Ø¹! 8Â² = 64. +25 Ù†Ù‚Ø·Ø©');
                addScore(25);
                document.getElementById('next3').disabled = false;
                showCelebration();
                setTimeout(() => {
                    setupCanvas4();
                }, 500);
            } else {
                element.classList.add('wrong-answer');
                showFeedback('feedback3', 'error', 'âŒ ØªØ°ÙƒØ±: rÂ² ÙŠØ¹Ù†ÙŠ Ù†Ø±Ø¨Ø¹ Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø±! 8 Ã— 8 = 64');
            }
        }

        function selectQuiz4(element, correct) {
            document.querySelectorAll('#section4 .quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });

            if (correct) {
                element.classList.add('correct-answer');
                showFeedback('feedback4', 'success', 'ğŸ‰ Ù…Ù…ØªØ§Ø²! ÙÙ‡Ù…Øª Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ©! +30 Ù†Ù‚Ø·Ø©');
                addScore(30);
                document.getElementById('next4').disabled = false;
                showCelebration();
            } else {
                element.classList.add('wrong-answer');
                showFeedback('feedback4', 'error', 'âŒ ØªØ°ÙƒØ±: rÂ² = 3Â² = 9');
            }
        }

        function selectFinal(questionNum, element, correct) {
            const siblings = element.parentElement.querySelectorAll('.quiz-option');
            siblings.forEach(opt => opt.style.pointerEvents = 'none');

            if (correct) {
                element.classList.add('correct-answer');
                finalAnswers[questionNum - 1] = true;
            } else {
                element.classList.add('wrong-answer');
            }
        }

        function checkFinalTest() {
            const correctCount = finalAnswers.filter(a => a).length;
            const percentage = (correctCount / 5) * 100;

            if (correctCount === 5) {
                showFeedback('feedbackFinal', 'success', `ğŸ† Ù…Ø«Ø§Ù„ÙŠ! ${correctCount}/5 ØµØ­ÙŠØ­Ø©! Ø£Ù†Øª Ø¨Ø·Ù„ Ø­Ù‚ÙŠÙ‚ÙŠ! +100 Ù†Ù‚Ø·Ø©`);
                addScore(100);
                document.getElementById('finishBtn').disabled = false;
                showCelebration();
            } else if (correctCount >= 3) {
                showFeedback('feedbackFinal', 'success', `ğŸ‘ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! ${correctCount}/5 ØµØ­ÙŠØ­Ø©! +${correctCount * 15} Ù†Ù‚Ø·Ø©`);
                addScore(correctCount * 15);
                document.getElementById('finishBtn').disabled = false;
            } else {
                showFeedback('feedbackFinal', 'error', `ğŸ’ª ${correctCount}/5 ØµØ­ÙŠØ­Ø©. Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¯Ø±Ø³ ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!`);
            }
        }

        function finishCourse() {
            const finalScore = score;
            alert(`ğŸ‰ğŸ‰ğŸ‰\n\nÙ…Ø¨Ø±ÙˆÙƒ! Ø£Ù†Ù‡ÙŠØª Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­!\n\nÙ…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø·Ùƒ: ${finalScore}\n\nØ£Ù†Øª Ø§Ù„Ø¢Ù† Ø®Ø¨ÙŠØ± ÙÙŠ Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©! ğŸ†`);
            showCelebration();
        }

        function goToSection(num) {
            document.querySelectorAll('.lesson-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('section' + num).classList.add('active');
            currentSection = num;
            updateProgress();

            // Setup canvases when sections are shown
            if (num === 1) animateCircle1();
            if (num === 2) setupCanvas2();
            if (num === 3) setupCanvas3();
            if (num === 4) setupCanvas4();

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateProgress() {
            const progress = (currentSection / 5) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressBar').textContent = Math.round(progress) + '%';
        }

        function addScore(points) {
            score += points;
            document.getElementById('totalScore').textContent = score;
        }

        function showFeedback(id, type, message) {
            const feedback = document.getElementById(id);
            feedback.className = 'feedback ' + type;
            feedback.textContent = message;
            feedback.style.display = 'block';
        }

        function showCelebration() {
            const celebration = document.getElementById('celebration');
            celebration.classList.add('show');
        }

        function closeCelebration() {
            const celebration = document.getElementById('celebration');
            celebration.classList.remove('show');
        }

        updateProgress();
    </script>
</body>
</html>